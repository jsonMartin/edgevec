# HOSTILE_REVIEWER: W15.2 Recall Benchmarks — REJECTED

**Date:** 2025-12-14
**Artifact:** W15.2 Standard Dataset Recall Benchmarks
**Author:** RUST_ENGINEER
**Reviewer:** HOSTILE_REVIEWER
**Verdict:** ❌ REJECTED

---

## Rejection Summary

The implementation fails to meet 2 of 6 acceptance criteria. Both missing features are implementable with the current architecture but were not implemented.

---

## Acceptance Criteria Status

| AC | Requirement | Status | Notes |
|:---|:------------|:-------|:------|
| AC15.2.1 | Create `benches/recall/` directory structure | ✅ PASS | Directory and mod.rs exist |
| AC15.2.2 | Implement SIFT-1M benchmark harness | ✅ PASS | `run_sift_benchmark()` exists |
| AC15.2.3 | Implement GloVe-100 benchmark harness | ❌ **FAIL** | No function exists |
| AC15.2.4 | Measure recall@1, recall@10, recall@100 | ✅ PASS | All k values tested |
| AC15.2.5 | Compare Float32 vs SQ8 quantized recall | ❌ **FAIL** | Only Float32 tested |
| AC15.2.6 | Document results in benchmark report | ✅ PASS | Markdown output works |

---

## Major Issues (MUST FIX)

### [M1] AC15.2.3 — GloVe-100 Benchmark Missing

**Location:** `benches/recall_bench.rs` (missing function)

**Problem:** The task explicitly requires "Implement GloVe-100 benchmark harness" but no `run_glove_benchmark()` function exists. The existing `load_fvecs()` and `load_ivecs()` functions would work with GloVe data, but the benchmark runner doesn't support it.

**Required Fix:**
```rust
fn run_glove_benchmark(data_dir: &Path) {
    // Load GloVe-100 files (100-dim, 1.2M vectors)
    let base_path = data_dir.join("glove_base.fvecs");
    let query_path = data_dir.join("glove_query.fvecs");
    let gt_path = data_dir.join("glove_groundtruth.ivecs");
    // ... same pattern as run_sift_benchmark
}
```

Add CLI argument `--glove` or `--dataset=glove` to invoke it.

---

### [M2] AC15.2.5 — SQ8 Quantized Recall Missing

**Location:** `benches/recall_bench.rs:run_recall_tests()` (only tests Float32)

**Problem:** The task explicitly requires "Compare Float32 vs SQ8 quantized recall" but only Float32 mode is benchmarked. The architecture SUPPORTS quantized storage via:

```rust
use edgevec::storage::StorageType;
use edgevec::quantization::QuantizerConfig;

storage.set_storage_type(StorageType::QuantizedU8(QuantizerConfig::default()));
```

**Required Fix:**
1. Create `run_quantized_benchmark()` or add `--sq8` flag
2. Build index with quantized storage
3. Run same recall tests and compare to Float32 results
4. Output comparison table showing recall delta

---

## Minor Issues (SHOULD FIX)

### [m1] Cargo Warning: Dual Target Registration

**Location:** `Cargo.toml:133-135` + `benches/recall_bench.rs`

**Problem:** File registered as both `[[bin]]` and auto-detected as `[[bench]]` target.

**Fix:** Either:
- Rename to `bin/recall_bench.rs` and update path, OR
- Add `autobenches = false` to Cargo.toml, OR
- Exclude via `bench = false` on the bin target

### [m2] Dead Code: RecallBenchConfig

**Location:** `benches/recall/mod.rs:199-213`

**Problem:** Struct is defined but never used (marked `#[allow(dead_code)]`).

**Fix:** Either use it in the benchmark runner or remove it.

### [m3] Misleading Synthetic Results

**Problem:** Synthetic benchmark shows ~0% recall which confuses users.

**Fix:** Add output note:
```
Note: Synthetic random data has no meaningful nearest neighbors.
Recall metrics are only meaningful with real datasets (SIFT, GloVe).
```

---

## What Works

- ✅ fvecs/ivecs loaders with proper error handling
- ✅ Recall calculation is mathematically correct
- ✅ 16 unit tests pass
- ✅ Synthetic mode runs without external data
- ✅ Markdown table output
- ✅ Percentile calculations

---

## Required Actions Before Resubmission

1. **[REQUIRED]** Add `run_glove_benchmark()` function with CLI support
2. **[REQUIRED]** Add SQ8 quantized recall benchmark using `StorageType::QuantizedU8`
3. **[RECOMMENDED]** Fix cargo warning about dual target registration
4. **[RECOMMENDED]** Remove or use `RecallBenchConfig` struct
5. **[RECOMMENDED]** Add note about synthetic data limitations

---

## Resubmission Instructions

After fixing M1 and M2:

```
/review W15.2
```

---

**Signed:** HOSTILE_REVIEWER
**Date:** 2025-12-14
**Kill Authority:** EXERCISED
