# EdgeVec Daily Task Guide â€” Day 19 (Week 4)

**Focus:** Async Persistence (Save/Load)
**Goal:** Full serialization and restoration of the index.

---

## 1. Context
Now we connect the `EdgeVec` state to the `IndexedDbBackend`. We will use `postcard` for efficient binary serialization.

## 2. Tasks

### T19.1: Serialization Implementation
Implement `serde::Serialize` and `serde::Deserialize` for:
- `EdgeVec` (inner)
- `HnswIndex`
- `VectorStorage`
- `HnswNode`, `HnswConfig`

### T19.2: `edgevec_save`
Expose `save` method.
- **Signature:** `pub async fn save(&self, name: &str) -> Result<(), JsValue>`
- **Logic:**
  1. Serialize `inner` to `Vec<u8>` using `postcard`.
  2. Call `IndexedDbBackend::write(name, bytes)`.
  3. Await the result.

### T19.3: `edgevec_load`
Expose `load` static method.
- **Signature:** `pub async fn load(name: &str) -> Result<EdgeVec, JsValue>`
- **Logic:**
  1. Call `IndexedDbBackend::read(name)`.
  2. Await bytes.
  3. Deserialize `postcard::from_bytes`.
  4. Return `EdgeVec` wrapper.

## 3. Constraints
- **Bundle Size:** `postcard` is small; verify it doesn't bloat WASM > 500KB.
- **Performance:** Serialization happens on the main thread (blocking). For v1, this is acceptable.

## 4. Verification
- Integration Test:
  1. `let idx = EdgeVec::new(...)`
  2. `idx.insert(...)`
  3. `idx.save("test-db")`
  4. Drop `idx`
  5. `let idx2 = EdgeVec::load("test-db")`
  6. Assert `idx2.len() == 1`

